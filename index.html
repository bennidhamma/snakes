<!DOCTYPE html>
<html>
<head>
    <title>Snakes</title>
    <meta charset="utf-8" />

    <link href='http://fonts.googleapis.com/css?family=VT323' rel='stylesheet' type='text/css'>

    <style type="text/css" media="screen">
      body {
        font-family: VT323;
        background: black;
        color: green;
      }

      h1 {
        text-align: center;
      }

      canvas {
        height: auto;;
        border: 4px solid green;
        margin: 0 auto;
        display: block;
        image-rendering: -webkit-optimize-contrast;
      }

      #game-over {
        text-align: center;
        line-height: 50px;
        border: 2px dashed green;
        background: black;
        position: absolute;
        width: 200px;
        height: 50px;
        left: calc(50% - 100px);
        top: calc(40% - 25px);
        display: none; // Hide the game over splash screen until the game is over.
      }
    </style>
</head>
<body>
    <header>
      <h1>Snakes</h1>
    </header>
    <canvas id="board"></canvas>
    <div id="game-over">Game Over</div>
    <footer>
        
    </footer>
    <script type="text/javascript" charset="utf-8">

      var pixelWidth = 500;
      var pixelHeight = 500;
      var gameWidth = 100;
      var gameHeight = 100;
      var unitWidth = pixelWidth / gameWidth;
      var unitHeight = pixelHeight / gameHeight;
      var intervalId = 0;

      var x = 50;
      var y = 50;
      var dx = -1;
      var dy = 0;

      // Find the game-over screen and store it in a variable.
      var gameOver = document.getElementById('game-over');

      // Find the canvas HTML element and store it in a variable.
      var canvas = document.getElementById('board');

      // Set the width and height of the canvas.
      canvas.width = pixelWidth;
      canvas.height = pixelHeight;

      // Add an event listener to the document to listen for key presses.
      document.addEventListener ('keydown', keyDown);

      // Get a drawing context from the canvas. This is needed for drawing routines.
      var ctx = canvas.getContext('2d');

      function fillPoint(x, y, color) {
        ctx.fillStyle = color;
        ctx.fillRect (x * unitWidth, y * unitHeight, unitWidth, unitHeight);
      }
      
      function startGame() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, 100, 100);

        intervalId = setInterval(update, 200);
      }

      function update() {
        x += dx;
        y += dy

        if (isAlive()) {
          fillPoint (x, y, 'green');
        } else {
          // Oops! Player is dead. Fill in the last spot red to show a little effect.
          fillPoint (x - dx, y - dy, 'red');

          // End the game timer.
          clearInterval(intervalId);

          // Show the game over screen.
          gameOver.style.display = 'block';
        }

      }

      function isAlive () {
        if (x < 0) {
          return false;
        }

        if (x > gameWidth) {
          return false;
        }

        if (y < 0) {
          return false;
        }

        if (y > gameHeight) {
          return false;
        }

        return true;
      }

      function keyDown(event) {
        // We need to track the new directions in separate variables
        // so that we can compare them to the old values and prevent
        // backtracking.
        var newDx = 0, newDy = 0;

        var code = event.keyCode;
        if (event.charCode && code == 0)
          code = event.charCode;
        switch(code) {
          case 37:
            // Key left.
            newDx = -1;
            newDy = 0;
            break;
          case 38:
            // Key up.
            newDx = 0;
            newDy = -1;
            break;
          case 39:
            // Key right.
            newDx = 1;
            newDy = 0;
            break;
          case 40:
            // Key down.
            newDx = 0;
            newDy = 1;
            break;
          default:
            // No arrow key pressed. Return and allow the event to continue.
            return;
        }

        // Multiply new dx and new dy by -1 to compare them to current dx / dy.
        // Only update if neither x nor y are in the same direction as before.
        if (newDx * -1 != dx && newDy * -1 != dy) {
          dx = newDx;
          dy = newDy;
        }
        event.preventDefault();
      }

      startGame();
    </script>
</body>
</html>
