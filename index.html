<!DOCTYPE html>
<html>
<head>
    <title>Snakes</title>
    <meta charset="utf-8" />

    <link href='http://fonts.googleapis.com/css?family=VT323' rel='stylesheet' type='text/css'>

    <style type="text/css" media="screen">
      body {
        font-family: VT323;
        background: black;
        color: green;
      }

      h1 {
        text-align: center;
      }

      canvas {
        height: auto;;
        border: 2px solid green;
        margin: 0 auto;
        display: block;
        image-rendering: -webkit-optimize-contrast;
      }
    </style>
</head>
<body>
    <header>
      <h1>Snakes</h1>
    </header>
    <canvas id="board"></canvas>
    <footer>
        
    </footer>
    <script type="text/javascript" charset="utf-8">

      var pixelWidth = 500;
      var pixelHeight = 500;
      var gameWidth = 100;
      var gameHeight = 100;
      var unitWidth = pixelWidth / gameWidth;
      var unitHeight = pixelHeight / gameHeight;
      var intervalId = 0;

      var x = 50;
      var y = 50;
      var dx = -1;
      var dy = 0;

      var canvas = document.getElementById("board");
      canvas.width = pixelWidth;
      canvas.height = pixelHeight;
      document.addEventListener ('keydown', keyDown);

      var ctx = canvas.getContext('2d');

      function fillPoint(x, y) {
        ctx.fillStyle = 'green';
        ctx.fillRect (x * unitWidth, y * unitHeight, unitWidth, unitHeight);
      }
      
      function startGame() {
        ctx.fillStyle = 'black';
        ctx.fillRect(0, 0, 100, 100);

        intervalId = setInterval(update, 200);
      }

      function update() {
        x += dx;
        y += dy;
        fillPoint (x, y);
      }

      function keyDown(event) {
        // We need to track the new directions in separate variables
        // so that we can compare them to the old values and prevent
        // backtracking.
        var newDx = 0, newDy = 0;

        var code = event.keyCode;
        if (event.charCode && code == 0)
          code = event.charCode;
        switch(code) {
          case 37:
            // Key left.
            newDx = -1;
            newDy = 0;
            break;
          case 38:
            // Key up.
            newDx = 0;
            newDy = -1;
            break;
          case 39:
            // Key right.
            newDx = 1;
            newDy = 0;
            break;
          case 40:
            // Key down.
            newDx = 0;
            newDy = 1;
            break;
          default:
            // No arrow key pressed. Return and allow the event to continue.
            return;
        }

        // Multiply new dx and new dy by -1 to compare them to current dx / dy.
        // Only update if neither x nor y are in the same direction as before.
        if (newDx * -1 != dx && newDy * -1 != dy) {
          dx = newDx;
          dy = newDy;
        }
        event.preventDefault();
      }

      startGame();
    </script>
</body>
</html>
